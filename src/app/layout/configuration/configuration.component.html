<div *ngIf="isLoadingConf && isLoadingControls"> loading .... </div>
<div *ngIf="!isLoadingConf && !isLoadingControls">


	<mat-tab-group>
		<mat-tab>
			<ng-template mat-tab-label>
				<i class="fa fa-heartbeat"></i>&nbsp;
				Run

			</ng-template>
				<mat-error *ngIf="errorMsg">{{errorMsg}}</mat-error>

				<div class="configuration-container ">
					Everything is Running
					<mat-slide-toggle 
						id = "autoprocess"
						[checked]="controls.autoprocess"
						(change)="setStartProcess( $event )">
					</mat-slide-toggle>
				</div>
				<div class="configuration-container ">
						Record Microphones
						<mat-slide-toggle 
							id = "autorecordAudio"
							[checked]="controls.autorecordAudio"
							(change)="setRecordDevices('audio', $event )">
						</mat-slide-toggle>
					</div>
					<div class="configuration-container ">
							Record Cameras
							<mat-slide-toggle 
								id = "autorecordVideo"
								[checked]="controls.autorecordVideo"
								(change)="setRecordDevices('video', $event )">
							</mat-slide-toggle>
						</div>
		</mat-tab>
		<mat-tab>
			<ng-template mat-tab-label>
				<i class="fa fa-video-camera"></i>&nbsp;
				<i class="fa fa-microphone"></i> &nbsp; Devices
			</ng-template>
			<mat-accordion>
				<div class="configuration-container ">
					<mat-tab-group>
						<div>
							<mat-tab>
								<ng-template mat-tab-label>
									<i class="fa fa-video-camera"></i>
									Cameras
								</ng-template>
								<button mat-raised-button (click)="saveDevice(cameras)">Save</button>
								<mat-error *ngIf="errorMsg">{{errorMsg}}</mat-error>
								<app-property [id]="cameras" [properties]="cameras"></app-property>
							</mat-tab>
							<mat-tab>
								<ng-template mat-tab-label>
									<i class="fa fa-video-camera"></i>
									Web Cameras
								</ng-template>
								<button mat-raised-button (click)="saveDevice(webCameras)">Save</button>
								<mat-error *ngIf="errorMsg">{{errorMsg}}</mat-error>
								<app-property [id]="webCameras" [properties]="webCameras"></app-property>
							</mat-tab>

							<mat-tab>
								<ng-template mat-tab-label>
									<i class="fa fa-microphone"></i>
									Integrated Microphones
								</ng-template>
								<button mat-raised-button (click)="saveDevice(webMicrophones)">Save</button>
								<mat-error *ngIf="errorMsg">{{errorMsg}}</mat-error>
								<app-property [id]="webMicrophones" [properties]="webMicrophones">
								</app-property>
							</mat-tab>


							<mat-tab>
								<ng-template mat-tab-label>
									<i class="fa fa-microphone"></i>
									IP Microphones
								</ng-template>
								<button mat-raised-button (click)="saveDevice(microphones)">Save</button>
								<mat-error *ngIf="errorMsg">{{errorMsg}}</mat-error>
								<app-property [id]="microphones" [properties]="microphones">
								</app-property>
							</mat-tab>



						</div>
					</mat-tab-group>
				</div>
			</mat-accordion>
		</mat-tab>

		<mat-tab>
			<ng-template mat-tab-label>
				<i class="fa fa-user"></i>&nbsp;
				General

			</ng-template>
			<mat-accordion>
				<div class="configuration-container ">
					<button mat-raised-button (click)="saveProperties(general)">Save</button>
					<mat-error *ngIf="errorMsg">{{errorMsg}}</mat-error>

					<mat-accordion>
						<mat-expansion-panel *ngFor="let configuration of general">
							<mat-expansion-panel-header>
								<mat-panel-title>
									{{configuration.displayGroup}}
								</mat-panel-title>
							</mat-expansion-panel-header>
							<div id="general" class="configuration-container "
								*ngFor="let property of configuration.props.general">
								{{property.displayName}} :
								<div [ngSwitch]="property.type">
									<div *ngSwitchCase="'boolean'">
										<mat-slide-toggle id="{{property.name}}" checked="{{property.value}}">
										</mat-slide-toggle>
									</div>
									<div *ngSwitchCase="'java.lang.String'">
										<mat-form-field>
											<input [(ngModel)]="property.value" id="{{property.name}}" matInput
												value="{{property.value}}">
										</mat-form-field>
									</div>
								</div>
							</div>

						</mat-expansion-panel>
					</mat-accordion>
				</div>
			</mat-accordion>
		</mat-tab>
		<mat-tab>
			<ng-template mat-tab-label>
				<i class="fa fa-user-plus"></i>&nbsp;
				Advanced

			</ng-template>
			<mat-accordion>
				<div class="configuration-container ">
					<button mat-raised-button (click)="saveProperties(advanced)">Save</button>
					<mat-error *ngIf="errorMsg">{{errorMsg}}</mat-error>

					<mat-accordion>
						<mat-expansion-panel *ngFor="let configuration of advanced">
							<mat-expansion-panel-header>
								<mat-panel-title>
									{{configuration.displayGroup}}
								</mat-panel-title>
							</mat-expansion-panel-header>
							<div id="advanced" class="configuration-container "
								*ngFor="let property of configuration.props.advanced">
								{{property.displayName}} :
								<div [ngSwitch]="property.type">
									<div *ngSwitchCase="'boolean'">
										<mat-slide-toggle id="{{property.name}}" checked="{{property.value}}">
										</mat-slide-toggle>
									</div>
									<div *ngSwitchCase="'java.lang.String'">
										<mat-form-field>
											<input [(ngModel)]="property.value" id="{{property.name}}" matInput
												value="{{property.value}}">
										</mat-form-field>
									</div>
								</div>
							</div>

						</mat-expansion-panel>
					</mat-accordion>
				</div>
			</mat-accordion>
		</mat-tab>

	</mat-tab-group>