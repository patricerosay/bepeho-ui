<div *ngIf="isLoading">loading ....</div>
<div *ngIf="error">Error while connecting to server</div>

<div class="col-lg-12">
  <div class="row">
    <div class="col-lg-6">
      <mat-button-toggle-group #group="matButtonToggleGroup" value="map">
        
        <mat-button-toggle routerLink="/map" value="map" aria-label="Map">
          <i class="fa fa-fw fa-map-marker"></i>&nbsp;
          
          <span>{{ "Map" | translate }} </span>

        </mat-button-toggle>
        <mat-button-toggle routerLink="/video-list" value="list" aria-label="List">
          <i class="fa fa-fw fa-list"></i>&nbsp;
          <span>{{ "List" | translate }} </span>
        </mat-button-toggle>

      </mat-button-toggle-group>
    </div>
    <div class="col-lg-6">
      <mat-paginator [length]="searchStats[0].sequenceCount" [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions"
        (page)="onPageEvent($event)">
      </mat-paginator>
    </div>
  </div>

  <div class="row">
    <mat-accordion class="col-lg-12">

      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            ...
          </mat-panel-title>
          <mat-panel-description>
            {{'Search Criterias'|translate}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div>
          <div class="row">
            <button mat-raised-button (click)="Reset()">{{'Reset Search Criterias'|translate}}</button>
          </div>
          <div class="row">
            <!-- <button mat-raised-button (click)="loadData(this)">Refresh</button> -->

            <mat-button-toggle-group name="fontStyle" aria-label="Font Style">
              <mat-button-toggle (click)="onSearchOnLastMinutes('0', '360')">{{'Last 6 Hours'|translate}}
              </mat-button-toggle>
              <mat-button-toggle (click)="onSearchOnLastMinutes('0', '1440')">{{'Last 24 Hours'|translate}}
              </mat-button-toggle>
              <mat-button-toggle (click)="onSearchOnLastMinutes('0', '10080')">{{'Last 7 Days'|translate}}
              </mat-button-toggle>
              <mat-button-toggle (click)="onSearchOnLastMinutes('0', '302400')">{{'Last 30 Days'|translate}}
              </mat-button-toggle>
              <mat-button-toggle (click)="onSearchOnLastMinutes('0', '2419200')">{{'All'|translate}}</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <!-- <div class="row">
        {{'Autodetection Level'|translate}}
        <mat-slider
          (input)="onDetectionLevel($event)"
          thumbLabel
          tickInterval="1"
          min="0"
          max="10"
        ></mat-slider>
      </div> -->
          <div class="row">
            {{'Speed (knts)'|translate}}
            <mat-slider (input)="onSearchOnSpeed($event)" thumbLabel tickInterval="1" min="0" max="40"></mat-slider>
          </div>
          <div class="row">
            {{'Heel Angle (deg)'| translate}}
            <mat-slider (input)="onSearchOnHeelAngle($event)" thumbLabel tickInterval="10" min="-90" max="90">
            </mat-slider>
          </div>
        </div>
      </mat-expansion-panel>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>
            ...
          </mat-panel-title>
          <mat-panel-description>
            {{'Display details about the results' | translate}}
          </mat-panel-description>
        </mat-expansion-panel-header>
        <div class="row">
          <table mat-table [dataSource]="searchStats" class="mat-elevation-z8">
            <!-- Position Column -->
            <ng-container matColumnDef="sequenceCount">
              <th mat-header-cell *matHeaderCellDef>{{'Total Stored'|translate}}</th>
              <td mat-cell *matCellDef="let element">{{ element.sequenceCount }}</td>
            </ng-container>

            <!-- Name Column -->
            <ng-container matColumnDef="sequenceDisplayed">
              <th mat-header-cell *matHeaderCellDef>{{'Currently Displayed'|translate}}</th>
              <td mat-cell *matCellDef="let element">
                {{ element.sequenceDisplayed }}
              </td>
            </ng-container>

            <!-- Weight Column -->
            <ng-container matColumnDef="error">
              <th mat-header-cell *matHeaderCellDef>{{'Total Erronous'|translate}}</th>
              <td mat-cell *matCellDef="let element">{{ element.error }}</td>
            </ng-container>

            <!-- Symbol Column -->
            <ng-container matColumnDef="from">
              <th mat-header-cell *matHeaderCellDef>{{'From'|translate}}</th>
              <td mat-cell *matCellDef="let element">{{ element.to *1000 | date:'MMMM d, y, HH:mm:ss a z'}}</td>
            </ng-container>
            <!-- Symbol Column -->
            <ng-container matColumnDef="to">
              <th mat-header-cell *matHeaderCellDef>{{'To'|translate}}</th>
              <td mat-cell *matCellDef="let element">{{ element.from*1000 | date:'MMMM d, y, HH:mm:ss a z' }}</td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="statColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: statColumns"></tr>
          </table>
        </div>

      </mat-expansion-panel>

    </mat-accordion>
  </div>

  <div class="row">
    <div id="map"></div>
  </div>