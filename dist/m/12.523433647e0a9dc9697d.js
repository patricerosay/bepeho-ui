(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{GZeB:function(t,e,o){"use strict";o.r(e),o.d(e,"DashboardModule",(function(){return w}));var a=o("Valr"),n=o("MnXN"),r=o("o8Qb"),s=o("DUip"),i=o("ZZ88"),c=o("TYT/"),u=o("cUzu");function b(t,e){if(1&t&&(c.Xb(0,"div",8),c.Xb(1,"h5"),c.Xb(2,"span",9),c.Nc(3),c.Wb(),c.Wb(),c.Xb(4,"span"),c.Sb(5,"i",10),c.Wb(),c.Wb()),2&t){var o=c.nc();c.Db(3),c.Qc("",o.viewName," ",o.data,"")}}var l=function(){function t(t){this.router=t,this.event=new c.o}return t.prototype.ngOnInit=function(){},t.prototype.gotoPage=function(){this.router.navigateByUrl(this.gotoUrl)},t.\u0275fac=function(e){return new(e||t)(c.Rb(s.c))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-stat"]],inputs:{bgClass:"bgClass",icon:"icon",count:"count",label:"label",data:"data",gotoUrl:"gotoUrl",viewName:"viewName"},outputs:{event:"event"},decls:13,vars:9,consts:[["mat-elevation-z8","",3,"click"],[1,"card-header"],[1,"row"],[1,"col","col-xs-3"],[1,"col","col-xs-9","text-right"],[1,"d-block","huge"],[1,"d-block"],["class","card-footer",4,"ngIf"],[1,"card-footer"],[1,"float-left"],[1,"fa","fa-arrow-circle-right","fa-5x"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.jc("click",(function(){return e.gotoPage()})),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"div",3),c.Sb(4,"i"),c.Wb(),c.Xb(5,"div",4),c.Xb(6,"h1"),c.Xb(7,"div",5),c.Nc(8),c.Wb(),c.Wb(),c.Xb(9,"h4"),c.Xb(10,"div",6),c.Nc(11),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Lc(12,b,6,2,"div",7),c.Wb()),2&t&&(c.Gb("card text-white bg-",e.bgClass,""),c.Db(4),c.Gb("fa ",e.icon," fa-5x"),c.Db(4),c.Oc(e.count),c.Db(3),c.Oc(e.label),c.Db(1),c.uc("ngIf",void 0!==e.viewName))},directives:[a.m],styles:[""]}),t}();function g(t,e){1&t&&(c.Xb(0,"div"),c.Nc(1," loading .... "),c.Wb())}function d(t,e){1&t&&(c.Xb(0,"div"),c.Nc(1," Error while connecting to server "),c.Wb())}function p(t,e){if(1&t&&(c.Xb(0,"div"),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Sb(3,"app-stat",3),c.oc(4,"translate"),c.oc(5,"translate"),c.Wb(),c.Xb(6,"div",2),c.Sb(7,"app-stat",3),c.oc(8,"translate"),c.oc(9,"translate"),c.Wb(),c.Xb(10,"div",2),c.Sb(11,"app-stat",3),c.oc(12,"translate"),c.oc(13,"translate"),c.Wb(),c.Wb(),c.Sb(14,"br"),c.Wb()),2&t){var o=c.nc();c.Db(3),c.uc("bgClass","warning")("icon","fa-bolt")("count",o.stats.eventCount)("label",c.pc(4,18,"Detected events"))("gotoUrl","search/map")("viewName",c.pc(5,20,"View on the map")),c.Db(4),c.uc("bgClass","success")("icon","fa-film")("count",o.stats.clipCount)("label",c.pc(8,22,"Clips ready to share"))("gotoUrl","video-records")("viewName",c.pc(9,24,"Share these videos")),c.Db(4),c.uc("bgClass","success")("icon","fa-cog")("count",o.stats.workerCount)("label",c.pc(12,26,"Background tasks"))("gotoUrl","worker")("viewName",c.pc(13,28,"Look out"))}}var h=[{path:"",component:function(){function t(t,e){this.translate=t,this.http=e,this.error=null,this.doughnutChartLabels=["Used","Left","Reserved"],this.doughnutChartData=[350,450,100],this.url="/recorder/stats",this.isLoading=!0,this.translate.addLangs(["en","fr","ur","es","it","fa","de","zh-CHS"]),this.translate.setDefaultLang("en");var o=this.getlangage();this.translate.use(o.match(/en|fr|ur|es|it|fa|de|zh-CHS/)?o:"en"),this.doughnutChartType="doughnut"}return t.prototype.getlangage=function(){return localStorage.getItem("langage")||this.translate.getBrowserLang()},t.prototype.chartClicked=function(t){},t.prototype.chartHovered=function(t){},t.prototype.getStats=function(t){var e=this;t.http.get(t.url).subscribe((function(e){t.stats=e,t.doughnutChartData[0]=t.stats.storageUsage,t.doughnutChartData[1]=t.stats.storageLimit-t.stats.storageUsage,t.doughnutChartData[2]=100-t.stats.storageLimit,t.getWorkers(t)}),(function(t){return e.logError(t)}))},t.prototype.getWorkers=function(t){t.http.get("/recorder/tasksTag").subscribe((function(e){t.stats.workerCount=e.tasks.length,t.isLoading=!1}))},t.prototype.ngOnInit=function(){this.getStats(this)},t.prototype.logError=function(t){this.error="error"},t.\u0275fac=function(e){return new(e||t)(c.Rb(r.d),c.Rb(u.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-dashboard"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"row"],[1,"col-xl-3","col-lg-6","stat"],[3,"bgClass","icon","count","label","gotoUrl","viewName"]],template:function(t,e){1&t&&(c.Lc(0,g,2,0,"div",0),c.Lc(1,d,2,0,"div",0),c.Lc(2,p,15,30,"div",0)),2&t&&(c.uc("ngIf",e.isLoading),c.Db(1),c.uc("ngIf",e.error),c.Db(1),c.uc("ngIf",!e.isLoading&&!e.error))},directives:[a.m,l],pipes:[r.c],styles:["@media (min-width:992px){.app-stat[_ngcontent-%COMP%]{height:50%}}"],data:{animation:[Object(i.a)()]}}),t}()}],f=function(){function t(){}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[s.g.forChild(h)],s.g]}),t}(),v=o("M0ag"),w=function(){function t(){}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[a.c,n.d,n.c,f,v.h,r.b]]}),t}()}}]);