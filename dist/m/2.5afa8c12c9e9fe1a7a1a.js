(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"4qUK":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var n=function(){return function(){}}()},nZeH:function(t,e,i){"use strict";i.d(e,"a",(function(){return E}));var n=i("Valr"),o=i("TYT/"),a=i("MnXN"),c=i("eHTH"),r=i("cSbt"),s=i("QJY3"),d=i("cUzu"),u=i("ETwC"),l=i("p+mS"),b=i("T5p2");function p(t,e){if(1&t&&(o.Xb(0,"mat-error"),o.Mc(1),o.Wb()),2&t){var i=o.nc();o.Db(1),o.Nc(i.invalidClipNameError)}}var h=["autosize"];function g(t,e){if(1&t&&(o.Xb(0,"mat-error"),o.Mc(1),o.Wb()),2&t){var i=o.nc();o.Db(1),o.Nc(i.errorMsg)}}function m(t,e){if(1&t&&(o.Xb(0,"div"),o.Mc(1),o.Wb()),2&t){var i=o.nc();o.Db(1),o.Nc(i.headerMessage)}}function v(t,e){1&t&&(o.Xb(0,"div"),o.Mc(1,"loading ...."),o.Wb())}function f(t,e){1&t&&(o.Xb(0,"th",25),o.Mc(1,"Name"),o.Wb())}function y(t,e){if(1&t&&(o.Xb(0,"td",26),o.Mc(1),o.Wb()),2&t){var i=e.$implicit;o.Db(1),o.Nc(i.date)}}function M(t,e){1&t&&(o.Xb(0,"th",25),o.Mc(1,"RecordedTime"),o.Wb())}function C(t,e){if(1&t&&(o.Xb(0,"td",26),o.Mc(1),o.Wb()),2&t){var i=e.$implicit;o.Db(1),o.Nc(i.name)}}function w(t,e){1&t&&(o.Xb(0,"th",25),o.Mc(1,"Max Ground Speed"),o.Wb())}function X(t,e){if(1&t&&(o.Xb(0,"td",26),o.Mc(1),o.Wb()),2&t){var i=e.$implicit;o.Db(1),o.Nc(i.bgs)}}function W(t,e){1&t&&(o.Xb(0,"th",25),o.Mc(1,"Max Ground Direction"),o.Wb())}function D(t,e){if(1&t&&(o.Xb(0,"td",26),o.Mc(1),o.Wb()),2&t){var i=e.$implicit;o.Db(1),o.Nc(i.bgd)}}function P(t,e){1&t&&o.Sb(0,"tr",27)}function S(t,e){1&t&&o.Sb(0,"tr",28)}function A(t,e){if(1&t){var i=o.Yb();o.Xb(0,"button",14),o.jc("click",(function(){o.Ec(i);var t=e.$implicit,n=e.index;return o.nc(2).onClickPlaylistItem(t,n)})),o.Mc(1),o.Wb()}if(2&t){var n=e.$implicit,a=o.nc(2);o.Ib("selected",n===a.currentVideo),o.Db(1),o.Oc(" ",n.channel," ")}}function O(t,e){1&t&&(o.Xb(0,"div"),o.Sb(1,"i",29),o.Mc(2," No Audio"),o.Wb())}function _(t,e){if(1&t){var i=o.Yb();o.Xb(0,"div",30),o.Xb(1,"vg-player",31),o.jc("onPlayerReady",(function(t){return o.Ec(i),o.nc(2).onAudioPlayerReady(t)})),o.Sb(2,"audio",32,33),o.Wb(),o.Wb()}if(2&t){var n=o.Bc(3),a=o.nc(2);o.Db(2),o.vc("src","/media/",a.currentAudio.src,"",o.Fc),o.tc("vgMedia",n)}}function k(t,e){if(1&t){var i=o.Yb();o.Xb(0,"div"),o.Xb(1,"table",5),o.Vb(2,6),o.Kc(3,f,2,0,"th",7),o.Kc(4,y,2,1,"td",8),o.Ub(),o.Vb(5,9),o.Kc(6,M,2,0,"th",7),o.Kc(7,C,2,1,"td",8),o.Ub(),o.Vb(8,10),o.Kc(9,w,2,0,"th",7),o.Kc(10,X,2,1,"td",8),o.Ub(),o.Vb(11,11),o.Kc(12,W,2,0,"th",7),o.Kc(13,D,2,1,"td",8),o.Ub(),o.Kc(14,P,1,0,"tr",12),o.Kc(15,S,1,0,"tr",13),o.Wb(),o.Xb(16,"button",14),o.jc("click",(function(){return o.Ec(i),o.nc().onBuildClip()})),o.Mc(17," Build "),o.Wb(),o.Xb(18,"button",14),o.jc("click",(function(){return o.Ec(i),o.nc().onExportSegment()})),o.Mc(19," Export "),o.Wb(),o.Xb(20,"button",14),o.jc("click",(function(){return o.Ec(i),o.nc().onSaveSegment()})),o.Mc(21," Save "),o.Wb(),o.Xb(22,"nav",15),o.Xb(23,"div"),o.Xb(24,"div",16),o.Xb(25,"vg-player",17),o.jc("onPlayerReady",(function(t){return o.Ec(i),o.nc().onVideoPlayerReady(t)})),o.Sb(26,"vg-buffering"),o.Xb(27,"vg-controls",18),o.Sb(28,"vg-play-pause"),o.Sb(29,"vg-playback-button"),o.Sb(30,"vg-time-display",19),o.Xb(31,"vg-scrub-bar"),o.Sb(32,"vg-scrub-bar-current-time"),o.Sb(33,"vg-scrub-bar-buffering-time"),o.Wb(),o.Sb(34,"vg-fullscreen"),o.Kc(35,A,2,3,"button",20),o.Wb(),o.Xb(36,"video",21,22),o.Sb(38,"track",23),o.Wb(),o.Wb(),o.Wb(),o.Kc(39,O,3,0,"div",2),o.Kc(40,_,4,2,"div",24),o.Wb(),o.Wb(),o.Wb()}if(2&t){var n=o.Bc(37),a=o.nc();o.Db(1),o.tc("dataSource",a.nmea),o.Db(13),o.tc("matHeaderRowDef",a.displayedColumns),o.Db(1),o.tc("matRowDefColumns",a.displayedColumns),o.Db(12),o.tc("vgAutohide",!0)("vgAutohideTime",1.5),o.Db(8),o.tc("ngForOf",a.segment.videos),o.Db(1),o.vc("src","/media/",a.currentVideo.src,"",o.Fc),o.tc("vgMedia",n),o.Db(2),o.vc("src","/media/subtitles/",a.data.GroupID,".vtt",o.Fc),o.Db(1),o.tc("ngIf",!a.currentAudio),o.Db(1),o.tc("ngIf",a.currentAudio)}}var x=function(){function t(t){this.activeModal=t,this.newClipName="clip"+Object(n.w)(new Date,"yyyy-MM-dd:HHMMSS","en"),this.style=1,this.invalidClipNameError=null}return t.prototype.onClose=function(){this.newClipName.length>=5?this.activeModal.close(this.newClipName+"|"+this.style):this.invalidClipNameError="Invalid parameters"},t.\u0275fac=function(e){return new(e||t)(o.Rb(a.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["ng-component"]],decls:30,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"nav","navbar-nav","flex-nowrap","ml-auto"],["hintLabel","Min 5 and max 30 characters"],["matInput","","matNativeControl","","required","","maxlength","30","placeholder","Enter new clip name",3,"ngModel","ngModelChange"],["input",""],["align","end"],[4,"ngIf"],["matNativeControl","","required","",3,"value","ngModel","valueChange","ngModelChange"],["value","1"],["value","2"],["value","4"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,e){if(1&t&&(o.Xb(0,"div",0),o.Xb(1,"h4",1),o.Mc(2,"Clip Building Parameters"),o.Wb(),o.Xb(3,"button",2),o.jc("click",(function(){return e.activeModal.dismiss("Cross click")})),o.Xb(4,"span",3),o.Mc(5,"\xd7"),o.Wb(),o.Wb(),o.Wb(),o.Xb(6,"div",4),o.Xb(7,"div",5),o.Xb(8,"mat-form-field",6),o.Xb(9,"input",7,8),o.jc("ngModelChange",(function(t){return e.newClipName=t})),o.Wb(),o.Xb(11,"mat-hint",9),o.Mc(12),o.Wb(),o.Kc(13,p,2,1,"mat-error",10),o.Wb(),o.Sb(14,"br"),o.Xb(15,"mat-form-field"),o.Xb(16,"mat-label"),o.Mc(17,"Clip Style"),o.Wb(),o.Xb(18,"select",11),o.jc("valueChange",(function(t){return e.style=t}))("ngModelChange",(function(t){return e.style=t})),o.Xb(19,"option",12),o.Mc(20,"Cool"),o.Wb(),o.Xb(21,"option",13),o.Mc(22,"Dynamic"),o.Wb(),o.Xb(23,"option",14),o.Mc(24,"Nervous"),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Wb(),o.Xb(25,"div",15),o.Xb(26,"button",16),o.jc("click",(function(){return e.activeModal.close("")})),o.Mc(27,"Cancel"),o.Wb(),o.Xb(28,"button",17),o.jc("click",(function(){return e.onClose()})),o.Mc(29,"OK"),o.Wb(),o.Wb()),2&t){var i=o.Bc(10);o.Db(9),o.tc("ngModel",e.newClipName),o.Db(3),o.Oc("",(null==i.value?null:i.value.length)||1,"/30"),o.Db(1),o.tc("ngIf",e.invalidClipNameError),o.Db(5),o.tc("value",e.style)("ngModel",e.style)}},directives:[c.c,r.b,s.b,s.o,s.e,s.i,s.l,c.f,n.m,c.g,s.p,s.m,s.r,c.b],encapsulation:2}),t}(),E=function(){function t(t,e,i,n){this.http=t,this.activeModal=e,this._ngZone=i,this.modalService=n,this.isLoading=!0,this.currentIndex=0,this.currentVideo=null,this.currentAudio=null,this.currentTime=0,this.currentSrc=null,this.displayedColumns=["bgs","bgd"]}return t.prototype.ngOnInit=function(){this.json&&(this.segment=JSON.parse(this.json).segments[0],this.currentVideo=this.segment.videos[this.currentIndex],this.currentAudio=this.segment.audios[0],this.headerMessage="Recorded "+this.data.start_time,this.nmea=[{date:Object(n.w)(this.data.start_time,"MM/dd/yyyy hh:mm","en"),name:this.data.GroupID,bgs:this.data.nmea_d_bgs_d,bgd:this.data.nmea_d_bgt_d}],this.isLoading=!1)},t.prototype.onPlayedVideo=function(t){this.audioApi&&this.audioApi.play()},t.prototype.onPausedVideo=function(t){this.audioApi&&this.audioApi.pause()},t.prototype.onUpdateVideoState=function(t){this.audioApi&&this.videoApi.play()},t.prototype.onSeeked=function(t){this.audioApi&&this.audioApi.seekTime(this.currentTime)},t.prototype.onEnded=function(t){this.audioApi&&this.audioApi.pause()},t.prototype.onRateChaged=function(t){this.audioApi&&(this.audioApi.playbackRate=this.videoApi.playbackRate)},t.prototype.onAudioPlayerReady=function(t){this.audioApi=t},t.prototype.onVideoPlayerReady=function(t){var e=this;this.videoApi=t,this.videoApi.subscriptions.play.subscribe(this.onPlayedVideo.bind(this)),this.videoApi.subscriptions.pause.subscribe(this.onPausedVideo.bind(this)),this.videoApi.subscriptions.ended.subscribe(this.onEnded.bind(this)),this.videoApi.subscriptions.error.subscribe(this.onEnded.bind(this)),this.videoApi.subscriptions.rateChange.subscribe(this.onRateChaged.bind(this)),this.videoApi.subscriptions.seeked.subscribe(this.onSeeked.bind(this)),this.videoApi.getDefaultMedia().subscriptions.loadedMetadata.subscribe(this.playVideo.bind(this)),this.videoApi.subscriptions.timeUpdate.subscribe((function(t){0!==t.srcElement.currentTime&&(e.currentSrc===t.srcElement.currentSrc?e.currentTime=t.srcElement.currentTime:e.currentSrc=t.srcElement.currentSrc)}))},t.prototype.nextVideo=function(){this.currentIndex++,this.currentIndex===this.segment.videos.length&&(this.currentIndex=0),this.currentVideo=this.segment.videos[this.currentIndex]},t.prototype.seekToCurrentTime=function(){this.videoApi.seekTime(this.currentTime),this.audioApi&&this.audioApi.seekTime(this.currentTime)},t.prototype.playVideo=function(){this.videoApi.play(),null!==this.audioApi&&this.audioApi.play(),this.seekToCurrentTime()},t.prototype.onClickPlaylistItem=function(t,e){this.currentIndex=e,this.currentVideo=t},t.prototype.onBuildClip=function(){var t=this,e=this;this.modalService.open(x,{centered:!0}).result.then((function(i){var n;if(""!==i){n=i.split("|"),e.newClipName=n[0],e.style=n[1];for(var o=Number(e.data.Duration),a=o/(e.segment.videos.length*t.style),c={beginEnd:[0,o],archive:!0,clipName:e.newClipName,clipDuration:o,videos:[],audios:[{position:0,segment:"",duration:o,id:e.segment.audios[0].id,url:e.segment.audios[0].src}]},r=0,s=0;s<e.style;s++)e.segment.videos.forEach((function(t){c.videos.push({position:r,duration:a,id:t.id,segment:e.data.GroupID}),r+=1}));e.http.post("/recorder","action=FileSystem&verb=build&prm="+JSON.stringify(c),{headers:{"content-type":"application/x-www-form-urlencoded"}}).subscribe((function(t){console.log(t),e.errorMsg="Success"}),(function(t){console.log(t),e.errorMsg=t.message}))}}),(function(t){}))},t.prototype.onSaveSegment=function(){var t=[],e=this;this.segment.audios.forEach((function(e){t.push(e.id)})),this.segment.videos.forEach((function(e){t.push(e.id)})),t.push(this.data.GroupID),this.http.post("/recorder","action=FileSystem&verb=keep&prm="+t.join(","),{headers:{"content-type":"application/x-www-form-urlencoded"}}).subscribe((function(t){e.headerMessage="Success"}),(function(t){e.headerMessage=t.message}))},t.prototype.onExportSegment=function(){var t=[],e=this;this.segment.audios.forEach((function(e){t.push(e.id)})),this.segment.videos.forEach((function(e){t.push(e.id)})),t.push(this.data.GroupID),this.http.post("/recorder","action=FileSystem&verb=get&prm="+t.join(","),{headers:{"content-type":"application/x-www-form-urlencoded"}}).subscribe((function(t){e.headerMessage="Success"}),(function(t){e.headerMessage=t.message}))},t.\u0275fac=function(e){return new(e||t)(o.Rb(d.a),o.Rb(a.a),o.Rb(o.A),o.Rb(a.i))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-qview"]],viewQuery:function(t,e){var i;1&t&&o.Rc(h,!0),2&t&&o.Ac(i=o.kc())&&(e.autosize=i.first)},decls:9,vars:4,consts:[[1,"modal-header","modal-xl"],[1,"modal-title"],[4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","bgs"],["matColumnDef","bgd"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-raised-button","","color","primary",3,"click"],[1,"navbar","navbar-light","navbar-expand","bg-white","shadow","mb-4","topbar","static-top"],[1,"videogular-container"],["onUpdateState","onUpdateState($state)",3,"onPlayerReady"],[3,"vgAutohide","vgAutohideTime"],["vgProperty","current","vgFormat","mm:ss"],["mat-raised-button","","color","primary",3,"selected","click",4,"ngFor","ngForOf"],["id","singleVideo","preload","auto","crossorigin","",3,"vgMedia","src"],["mediaV",""],["kind","subtitles","label","Data","srclang","en","default","",3,"src"],["hidden","","class","videogular-container-audio",4,"ngIf"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[1,"fa","fa-microphone-slash"],["hidden","",1,"videogular-container-audio"],[3,"onPlayerReady"],["vg-type","audio","id","singleAudio","preload","auto","crossorigin","",3,"vgMedia","src"],["mediaA",""]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"h4",1),o.Kc(2,g,2,1,"mat-error",2),o.Kc(3,m,2,1,"div",2),o.Wb(),o.Xb(4,"button",3),o.jc("click",(function(){return e.activeModal.dismiss("Cross click")})),o.Xb(5,"span",4),o.Mc(6,"\xd7"),o.Wb(),o.Wb(),o.Wb(),o.Kc(7,v,2,0,"div",2),o.Kc(8,k,41,11,"div",2)),2&t&&(o.Db(2),o.tc("ngIf",e.errorMsg),o.Db(1),o.tc("ngIf",e.headerMessage),o.Db(4),o.tc("ngIf",e.isLoading),o.Db(1),o.tc("ngIf",!e.isLoading))},directives:[n.m,c.b,u.j,u.c,u.e,u.b,u.g,u.i,l.a,a.k,b.n,b.d,b.e,b.g,b.h,b.l,b.i,b.k,b.j,b.f,n.l,b.m,u.d,u.a,u.f,u.h],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;overflow:hidden}.videogular-container[_ngcontent-%COMP%], .videogular-container-audio[_ngcontent-%COMP%]{width:100%;margin:auto;overflow:hidden}.videogular-container-audio[_ngcontent-%COMP%]{height:50px}@media (min-width:992px){.videogular-container[_ngcontent-%COMP%]{height:75%}.videogular-container-audio[_ngcontent-%COMP%]{height:50px}}@media (min-width:768px) and (max-width:991px){.videogular-container[_ngcontent-%COMP%]{height:75%}.videogular-container-audio[_ngcontent-%COMP%]{height:50px}}videogular[_ngcontent-%COMP%]   my-stop-button[_ngcontent-%COMP%]{display:table-cell;width:50px;vertical-align:middle;text-align:center;cursor:pointer}videogular[_ngcontent-%COMP%]   my-stop-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], videogular[_ngcontent-%COMP%]   my-stop-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, videogular[_ngcontent-%COMP%]   my-stop-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:none}videogular[_ngcontent-%COMP%]   div.my-button[_ngcontent-%COMP%]{display:table-cell;width:50px;vertical-align:middle;text-align:center;cursor:pointer}videogular[_ngcontent-%COMP%]   div.my-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], videogular[_ngcontent-%COMP%]   div.my-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, videogular[_ngcontent-%COMP%]   div.my-button[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:none}table[_ngcontent-%COMP%]{width:100%}[_ngcontent-%COMP%]::cue{color:#ff0;font-weight:700;line:-16}"]}),t}()}}]);