(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{M5D0:function(n,e,t){"use strict";t.r(e),t.d(e,"LoginHubloModule",(function(){return m}));var o=t("Valr"),r=t("o8Qb"),i=t("DUip"),a=t("ZZ88"),c=t("+Ct4"),s=t("TYT/"),g=t("cUzu"),l=t("QJY3"),p=t("eHTH");function u(n,e){1&n&&(s.Xb(0,"div"),s.Sb(1,"i",15),s.Xb(2,"span",16),s.Mc(3,"Registering..."),s.Wb(),s.Wb())}function d(n,e){1&n&&(s.Xb(0,"mat-error"),s.Mc(1),s.oc(2,"translate"),s.Wb()),2&n&&(s.Db(1),s.Nc(s.pc(2,1,"Login Failed. Please check your user name and password")))}function b(n,e){if(1&n&&(s.Xb(0,"mat-error"),s.Mc(1),s.oc(2,"translate"),s.Wb()),2&n){var t=s.nc();s.Db(1),s.Nc(s.pc(2,1,t.errorMsg))}}var f=[{path:"",component:function(){function n(n,e,t,o,r){this.translate=n,this.router=e,this.route=t,this.http=o,this.scriptService=r,this.isLogginFailed=!1,this.isLoading=!0,this.isRegistering=!1,this.translate.addLangs(["en","fr","ur","es","it","fa","de","zh-CHS"]),this.translate.setDefaultLang("en");var i=this.translate.getBrowserLang();this.translate.use(i.match(/en|fr|ur|es|it|fa|de|zh-CHS/)?i:"en");var a=this;r.load("apizee").then((function(n){a.apiRTC=window.apiRTC,a.apiRTC.setLogLevel(0),a.isLoading=!1})).catch((function(n){return a.errorMsg=n}))}return n.prototype.ngOnInit=function(){this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"},n.prototype.onCancel=function(){this.router.navigateByUrl("/dashboard")},n.prototype.onLoggedin=function(n){var e=this;e.isLogginFailed=!1,e.isRegistering=!0,console.log("register"),this.ua&&delete this.ua;var t="apizee:"+n.value.name;this.ua=new this.apiRTC.UserAgent({uri:t}),this.ua?this.ua.register({cloudFetchRetries:3,cloudFetchRetryDelay:2e3,password:n.value.pass}).then((function(o){e.connectedSession=o,localStorage.setItem("apikey",t),localStorage.setItem("apipass",n.value.pass),localStorage.setItem("id",e.connectedSession.id),localStorage.setItem("key",e.connectedSession.token),localStorage.setItem("token","apzkey:"+e.connectedSession.token),localStorage.setItem("username",e.connectedSession.userData.username),localStorage.setItem("nickname",e.connectedSession.userData.nickname),e.apiRTC.CloudApi.get("/api/getEnterpriseInfos",{},{accept:"application/json",Authorization:"Bearer "+e.connectedSession.token}).then((function(n){localStorage.setItem("enterpriseId",n.enterpriseId),localStorage.setItem("enterpriseKey",n.enterpriseKey),localStorage.setItem("users",JSON.stringify(n.users))})).catch((function(n){console.error(n),e.isRegistering=!1})),localStorage.setItem("isLoggedinHublo","true"),e.isRegistering=!1,e.router.navigateByUrl(e.returnUrl),console.log(e.connectedSession)})).catch((function(n){e.isLogginFailed=!0,e.isRegistering=!1,console.error("User agent registration failed",n)})):console.log("UA is not created")},n.\u0275fac=function(e){return new(e||n)(s.Rb(r.d),s.Rb(i.c),s.Rb(i.a),s.Rb(g.a),s.Rb(c.a))},n.\u0275cmp=s.Lb({type:n,selectors:[["app-login"]],decls:26,vars:16,consts:[[1,"login-page"],[1,"row","justify-content-md-center"],[1,"col-md-4"],["src","assets/images/Icon-83.5@2x.png","width","150px"],["role","form",3,"ngSubmit"],["f","ngForm"],[1,"form-content"],["name","name","ngModel","","required","","id","name",1,"form-control","input-underline","input-lg",3,"placeholder"],["name","ngModel"],["type","password","name","pass","ngModel","","required","","id","pass",1,"form-control","input-underline","input-lg",3,"placeholder"],["pass","ngModel"],["type","submit",1,"btn","rounded-btn",3,"value"],["routerLink","/dashboard"],[1,"btn","rounded-btn",3,"click"],[4,"ngIf"],[1,"fa","fa-spinner","fa-pulse","fa-3x","fa-fw"],[1,"sr-only"]],template:function(n,e){if(1&n){var t=s.Yb();s.Xb(0,"div",0),s.Xb(1,"div",1),s.Xb(2,"div",2),s.Sb(3,"img",3),s.Xb(4,"h1"),s.Mc(5,"Connect to Hublo.io"),s.Wb(),s.Xb(6,"form",4,5),s.jc("ngSubmit",(function(){s.Ec(t);var n=s.Bc(7);return e.onLoggedin(n)})),s.Xb(8,"div",6),s.Sb(9,"input",7,8),s.oc(11,"translate"),s.Sb(12,"input",9,10),s.oc(14,"translate"),s.Wb(),s.Sb(15,"input",11),s.oc(16,"translate"),s.Wb(),s.Xb(17,"a",12),s.Xb(18,"button",13),s.jc("click",(function(){return e.onCancel()})),s.Mc(19),s.oc(20,"translate"),s.Wb(),s.Wb(),s.Kc(21,u,4,0,"div",14),s.Sb(22,"br"),s.Kc(23,d,3,3,"mat-error",14),s.Sb(24,"br"),s.Kc(25,b,3,3,"mat-error",14),s.Wb(),s.Wb(),s.Wb()}2&n&&(s.tc("@routerTransition",void 0),s.Db(9),s.uc("placeholder",s.pc(11,8,"Name")),s.Db(3),s.uc("placeholder",s.pc(14,10,"Password")),s.Db(3),s.uc("value",s.pc(16,12,"Log in")),s.Db(4),s.Nc(s.pc(20,14,"Back")),s.Db(2),s.tc("ngIf",e.isRegistering),s.Db(2),s.tc("ngIf",e.isLogginFailed),s.Db(2),s.tc("ngIf",e.errorMsg))},directives:[l.s,l.j,l.k,l.b,l.i,l.l,l.o,i.f,o.m,p.b],pipes:[r.c],styles:["[_nghost-%COMP%]{display:block}.login-page[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;overflow:auto;background:#222;text-align:center;color:#fff;padding:3em}.login-page[_ngcontent-%COMP%]   .col-lg-4[_ngcontent-%COMP%]{padding:0}.login-page[_ngcontent-%COMP%]   .input-lg[_ngcontent-%COMP%]{height:46px;padding:10px 16px;font-size:18px;line-height:1.3333333;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]{background:0 0;box-shadow:none;border:none;border-bottom:2px solid hsla(0,0%,100%,.5);color:#fff;border-radius:0}.login-page[_ngcontent-%COMP%]   .input-underline[_ngcontent-%COMP%]:focus{border-bottom:2px solid #fff;box-shadow:none}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]{border-radius:50px;color:hsla(0,0%,100%,.8);background:#222;border:2px solid hsla(0,0%,100%,.8);font-size:18px;line-height:40px;padding:0 25px}.login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:active, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:focus, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:hover, .login-page[_ngcontent-%COMP%]   .rounded-btn[_ngcontent-%COMP%]:visited{color:#fff;border:2px solid #fff;outline:none}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:300;margin-top:20px;margin-bottom:10px;font-size:36px}.login-page[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:hsla(0,0%,100%,.7)}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{padding:8px 0}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:hsla(0,0%,100%,.6)!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-moz-placeholder, .login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{color:hsla(0,0%,100%,.6)!important}.login-page[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:-ms-input-placeholder{color:hsla(0,0%,100%,.6)!important}.login-page[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{padding:40px 0}.login-page[_ngcontent-%COMP%]   .user-avatar[_ngcontent-%COMP%]{border-radius:50%;border:2px solid #fff}"],data:{animation:[Object(a.a)()]}}),n}()}],h=function(){function n(){}return n.\u0275mod=s.Pb({type:n}),n.\u0275inj=s.Ob({factory:function(e){return new(e||n)},imports:[[i.g.forChild(f)],i.g]}),n}(),m=function(){function n(){}return n.\u0275mod=s.Pb({type:n}),n.\u0275inj=s.Ob({factory:function(e){return new(e||n)},imports:[[o.c,r.b,h,l.d,p.e]]}),n}()}}]);