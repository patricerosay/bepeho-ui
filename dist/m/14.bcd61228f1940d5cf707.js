(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{PZj2:function(e,t,n){"use strict";n.r(t),n.d(t,"MosaicModule",(function(){return Me}));var a=n("Valr"),o=n("DUip"),r=n("ea4N"),c=n("iPg2"),i=n("TYT/"),s=n("cUzu"),d=function(){function e(e){this.http=e,this.url="/recorder/mics"}return e.prototype.getMicrophones=function(){var e=this,t=this;return new Promise((function(n,a){t.http.get(e.url).subscribe((function(e){var t=[];return e.forEach((function(e){e.enabled&&t.push(e)})),n(t)}))}))},e.prototype.showMicrophone=function(e){var t=localStorage.getItem(e);return!t||"true"===t},e.\u0275fac=function(t){return new(t||e)(i.fc(s.a))},e.\u0275prov=i.Nb({token:e,factory:e.\u0275fac}),e}(),b=n("QJY3"),u=n("Wjhp"),l=n("o8Qb"),m=n("IzAD"),f=n("aBAV"),g=n("ETwC"),p=n("MnXN"),h=n("eHTH");function v(e,t){1&e&&(i.Xb(0,"div"),i.Nc(1," loading .... "),i.Wb())}function w(e,t){1&e&&(i.Xb(0,"th",20),i.Nc(1),i.oc(2,"translate"),i.Wb()),2&e&&(i.Db(1),i.Pc(" ",i.pc(2,1,"Geo Heading"),""))}function D(e,t){if(1&e&&(i.Xb(0,"td",21),i.Nc(1),i.Wb()),2&e){var n=t.$implicit;i.Db(1),i.Pc(" ",n.heading," ")}}function W(e,t){1&e&&(i.Xb(0,"th",20),i.Nc(1),i.oc(2,"translate"),i.Wb()),2&e&&(i.Db(1),i.Pc(" ",i.pc(2,1,"Ground Speed (knts)")," "))}function M(e,t){if(1&e&&(i.Xb(0,"td",21),i.Nc(1),i.Wb()),2&e){var n=t.$implicit;i.Db(1),i.Pc(" ",n.speed," ")}}function X(e,t){1&e&&(i.Xb(0,"th",20),i.Nc(1),i.oc(2,"translate"),i.Wb()),2&e&&(i.Db(1),i.Pc(" ",i.pc(2,1,"TWS")," "))}function S(e,t){if(1&e&&(i.Xb(0,"td",21),i.Nc(1),i.Wb()),2&e){var n=t.$implicit;i.Db(1),i.Pc(" ",n.tws," ")}}function y(e,t){1&e&&(i.Xb(0,"th",20),i.Nc(1),i.oc(2,"translate"),i.Wb()),2&e&&(i.Db(1),i.Pc("",i.pc(2,1,"TWD")," "))}function C(e,t){if(1&e&&(i.Xb(0,"td",21),i.Nc(1),i.Wb()),2&e){var n=t.$implicit;i.Db(1),i.Pc(" ",n.twd," ")}}function L(e,t){1&e&&(i.Xb(0,"th",20),i.Nc(1),i.oc(2,"translate"),i.Wb()),2&e&&(i.Db(1),i.Pc("",i.pc(2,1,"GPS Time")," "))}function N(e,t){if(1&e&&(i.Xb(0,"td",21),i.Nc(1),i.Wb()),2&e){var n=t.$implicit;i.Db(1),i.Pc(" ",n.time," ")}}function P(e,t){1&e&&(i.Xb(0,"th",20),i.Nc(1),i.oc(2,"translate"),i.Wb()),2&e&&(i.Db(1),i.Pc(" ",i.pc(2,1,"Longitude")," "))}function I(e,t){if(1&e&&(i.Xb(0,"td",21),i.Nc(1),i.Wb()),2&e){var n=t.$implicit;i.Db(1),i.Pc(" ",n.blo," ")}}function R(e,t){1&e&&(i.Xb(0,"th",20),i.Nc(1),i.oc(2,"translate"),i.Wb()),2&e&&(i.Db(1),i.Pc("",i.pc(2,1,"Latitude")," "))}function k(e,t){if(1&e&&(i.Xb(0,"td",21),i.Nc(1),i.Wb()),2&e){var n=t.$implicit;i.Db(1),i.Pc(" ",n.bla," ")}}function O(e,t){1&e&&i.Sb(0,"tr",22)}function j(e,t){1&e&&i.Sb(0,"tr",23)}function U(e,t){if(1&e&&(i.Xb(0,"div"),i.Xb(1,"table",8),i.Vb(2,9),i.Lc(3,w,3,3,"th",10),i.Lc(4,D,2,1,"td",11),i.Ub(),i.Vb(5,12),i.Lc(6,W,3,3,"th",10),i.Lc(7,M,2,1,"td",11),i.Ub(),i.Vb(8,13),i.Lc(9,X,3,3,"th",10),i.Lc(10,S,2,1,"td",11),i.Ub(),i.Vb(11,14),i.Lc(12,y,3,3,"th",10),i.Lc(13,C,2,1,"td",11),i.Ub(),i.Vb(14,15),i.Lc(15,L,3,3,"th",10),i.Lc(16,N,2,1,"td",11),i.Ub(),i.Vb(17,16),i.Lc(18,P,3,3,"th",10),i.Lc(19,I,2,1,"td",11),i.Ub(),i.Vb(20,17),i.Lc(21,R,3,3,"th",10),i.Lc(22,k,2,1,"td",11),i.Ub(),i.Lc(23,O,1,0,"tr",18),i.Lc(24,j,1,0,"tr",19),i.Wb(),i.Wb()),2&e){var n=i.nc(2);i.Db(1),i.uc("dataSource",n.dataSource),i.Db(22),i.uc("matHeaderRowDef",n.displayedColumns),i.Db(1),i.uc("matRowDefColumns",n.displayedColumns)}}function F(e,t){if(1&e){var n=i.Yb();i.Xb(0,"div"),i.Xb(1,"mat-tab",24),i.Xb(2,"img",25),i.jc("src",(function(){i.Fc(n);var e=t.$implicit;return i.nc(2).getPreviewUrl(e)})),i.Wb(),i.Wb(),i.Wb()}if(2&e){var a=t.$implicit;i.Db(1),i.vc("label",a.name)}}function V(e,t){if(1&e&&(i.Xb(0,"ngb-alert",26),i.Nc(1),i.Wb()),2&e){var n=i.nc(2);i.uc("dismissible",!1),i.Db(1),i.Qc("Livestreaming now ",n.camera.name," to ",n.group.value," ")}}function x(e,t){if(1&e&&(i.Xb(0,"mat-error"),i.Nc(1),i.Wb()),2&e){var n=i.nc(2);i.Db(1),i.Oc(n.errorMsg)}}function A(e,t){if(1&e){var n=i.Yb();i.Xb(0,"div"),i.Xb(1,"mat-grid-tile"),i.Xb(2,"img",25),i.jc("src",(function(){i.Fc(n);var e=t.$implicit;return i.nc(2).getPreviewUrl(e)})),i.Wb(),i.Wb(),i.Wb()}}function T(e,t){if(1&e){var n=i.Yb();i.Xb(0,"div"),i.Xb(1,"div",1),i.Nc(2),i.oc(3,"translate"),i.Xb(4,"mat-slide-toggle",2),i.jc("change",(function(e){return i.Fc(n),i.nc().onDisplayInstrument(e)})),i.Wb(),i.Wb(),i.Lc(5,U,25,3,"div",0),i.Xb(6,"mat-tab-group"),i.Xb(7,"mat-tab",3),i.Xb(8,"mat-tab-group"),i.Lc(9,F,3,1,"div",4),i.Wb(),i.Wb(),i.Xb(10,"mat-tab",5),i.Lc(11,V,2,3,"ngb-alert",6),i.Lc(12,x,2,1,"mat-error",0),i.Xb(13,"mat-grid-list",7),i.Lc(14,A,3,0,"div",4),i.Wb(),i.Wb(),i.Wb(),i.Wb()}if(2&e){var a=i.nc();i.Db(2),i.Pc(" ",i.pc(3,7,"Show Instruments")," "),i.Db(2),i.uc("checked",!1),i.Db(1),i.uc("ngIf",a.worker),i.Db(4),i.uc("ngForOf",a.mosaic),i.Db(2),i.uc("ngIf",a.camera&&a.group.value),i.Db(1),i.uc("ngIf",a.errorMsg),i.Db(2),i.uc("ngForOf",a.mosaic)}}var J=[{heading:"n/a",speed:"n/a",tws:"n/a",twd:"n/a",time:"n/a",bla:"n/a",blo:"n/a"}],Y=function(){function e(e,t){this.dialogRef=e,this.data=t}return e.prototype.onSubmit=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(i.Rb(r.g),i.Rb(r.a))},e.\u0275cmp=i.Lb({type:e,selectors:[["ng-component"]],decls:31,vars:15,consts:[[1,"container"],[3,"ngSubmit"],["heroForm","ngForm"],[1,"form-group"],["for","name"],["type","text","id","name","required","","name","name",1,"form-control",3,"disabled","ngModel","ngModelChange"],["name","ngModel"],[1,"alert","alert-danger",3,"hidden"],["for","url"],["type","text","id","url","required","","name","url",1,"form-control",3,"disabled","ngModel","ngModelChange"],["for","address"],["type","text","id","address","required","","name","address",1,"form-control",3,"disabled","ngModel","ngModelChange"],["color","accent","name","shouldRecord",1,"example-margin",3,"ngModel","checked","disabled","ngModelChange"],["color","accent","name","enabled",1,"example-margin",3,"ngModel","checked","disabled","ngModelChange"],["type","cancel",1,"btn","btn-success"]],template:function(e,t){if(1&e&&(i.Xb(0,"div",0),i.Xb(1,"h1"),i.Nc(2,"View Parameters"),i.Wb(),i.Xb(3,"form",1,2),i.jc("ngSubmit",(function(){return t.onSubmit()})),i.Xb(5,"div",3),i.Xb(6,"label",4),i.Nc(7,"Name"),i.Wb(),i.Xb(8,"input",5,6),i.jc("ngModelChange",(function(e){return t.data.name=e})),i.Wb(),i.Xb(10,"div",7),i.Nc(11," Name is required "),i.Wb(),i.Xb(12,"label",8),i.Nc(13,"Preview URL"),i.Wb(),i.Xb(14,"input",9,6),i.jc("ngModelChange",(function(e){return t.data.camPreviewUrl=e})),i.Wb(),i.Xb(16,"div",7),i.Nc(17," URL is required "),i.Wb(),i.Xb(18,"label",10),i.Nc(19,"Recording Address "),i.Wb(),i.Xb(20,"input",11,6),i.jc("ngModelChange",(function(e){return t.data.address=e})),i.Wb(),i.Xb(22,"div",7),i.Nc(23," Address is required "),i.Wb(),i.Xb(24,"mat-slide-toggle",12),i.jc("ngModelChange",(function(e){return t.data.shouldRecord=e})),i.Nc(25," Record "),i.Wb(),i.Sb(26,"br"),i.Xb(27,"mat-slide-toggle",13),i.jc("ngModelChange",(function(e){return t.data.enabled=e})),i.Nc(28," Mosaic "),i.Wb(),i.Wb(),i.Xb(29,"button",14),i.Nc(30,"Close"),i.Wb(),i.Wb(),i.Wb()),2&e){var n=i.Cc(9);i.Db(8),i.uc("disabled",!0)("ngModel",t.data.name),i.Db(2),i.uc("hidden",n.valid||n.pristine),i.Db(4),i.uc("disabled",!0)("ngModel",t.data.camPreviewUrl),i.Db(2),i.uc("hidden",n.valid||n.pristine),i.Db(4),i.uc("disabled",!0)("ngModel",t.data.address),i.Db(2),i.uc("hidden",n.valid||n.pristine),i.Db(2),i.uc("ngModel",t.data.shouldRecord)("checked",t.data.shouldRecord)("disabled",!0),i.Db(3),i.uc("ngModel",t.data.enabled)("checked",t.data.enabled)("disabled",!0)}},directives:[b.s,b.j,b.k,b.b,b.o,b.i,b.l,u.a],encapsulation:2}),e}(),$=[{path:"",component:function(){function e(e,t,n){this.http=e,this.dialog=t,this.translate=n,this.cameras=null,this.microphones=null,this.displayedColumns=["heading","speed","time","blo","bla","tws","twd"],this.dataSource=J,this.isLoading=!0,this.mosaic=new Array,this.mics=new Array,this.microphone=null,this.translate.addLangs(["en","fr","ur","es","it","fa","de","zh-CHS"]),this.translate.setDefaultLang("en");var a=this.getlangage();this.translate.use(a.match(/en|fr|ur|es|it|fa|de|zh-CHS/)?a:"en"),this.cameras=new c.a(e),this.microphones=new d(e)}return e.prototype.getlangage=function(){return localStorage.getItem("langage")||this.translate.getBrowserLang()},e.prototype.onDisplayInstrument=function(e){this.stopInstrumentWorker(),e.checked&&this.startInstrumentWorker()},e.prototype.getInstruments=function(){var e=this;e.http.get("/recorder/data").subscribe((function(t){null!==t?t.forEach((function(t){if("bgs_d"===t.id)e.dataSource[0].speed=t.value;else if("bgt_d"===t.id)e.dataSource[0].heading=t.value;else if("twa_d"===t.id)e.dataSource[0].twd=t.value;else if("tws_d"===t.id)e.dataSource[0].tws=t.value;else if("gpsTime"===t.id){var n=Math.round(parseInt(t.value,10)),a=Math.floor(n/1e4),o=Math.floor((n-1e4*a)/100);e.dataSource[0].time=a+":"+o+":"+(n-(1e4*a+100*o))}else"blo"===t.id?e.dataSource[0].blo=t.value:"bla"===t.id&&(e.dataSource[0].bla=t.value)})):(e.dataSource[0].speed="err",e.dataSource[0].heading="err",e.dataSource[0].twd="err",e.dataSource[0].tws="err",e.dataSource[0].time="err",e.dataSource[0].blo="err")}),(function(){e.dataSource[0].speed="err",e.dataSource[0].heading="err",e.dataSource[0].twd="err",e.dataSource[0].tws="err",e.dataSource[0].time="err",e.dataSource[0].blo="err"}))},e.prototype.stopInstrumentWorker=function(){null!==this.worker&&(clearInterval(this.worker),this.worker=null,this.dataSource[0]={heading:"n/a",speed:"n/a",tws:"n/a",twd:"n/a",time:"n/a",bla:"n/a",blo:"n/a"})},e.prototype.startInstrumentWorker=function(){var e=this;this.getInstruments(),this.worker=setInterval((function(){e.getInstruments()}),2500)},e.prototype.ngOnDestroy=function(){console.log("ondestroy"),this.stopInstrumentWorker()},e.prototype.ngOnInit=function(){var e=this;e.cameras.getCameras().then((function(t){e.mosaic=t,e.microphones.getMicrophones().then((function(t){e.mics=t,console.log(e.mics),e.isLoading=!1}))}))},e.prototype.postAction=function(e){var t=this;this.http.post("/recorder",e,{headers:{"content-type":"application/x-www-form-urlencoded"}}).subscribe((function(e){console.log(e),t.errorMsg="Success"}),(function(e){console.log(e),t.errorMsg=e.message}))},e.prototype.onMicChanged=function(e,t){this.microphone=e.checked?t:null},e.prototype.onDataChanged=function(e){this.postAction("action=data&verb="+(e.checked?"start":"stop"))},e.prototype.getPreviewUrl=function(e){return e?"/"+e.id:void 0},e.prototype.onStream=function(e){var t=this;this.stream=e,"LIVERECORD"!==this.stream?this.http.post("/recorder","action=CamButtons&verb=merge&stream="+e+"&prm="+[this.camera.id,this.microphone],{headers:{"content-type":"application/x-www-form-urlencoded"}}).subscribe((function(e){console.log(e),t.errorMsg="Success"}),(function(e){console.log(e),t.errorMsg=e.message})):this.http.post("/recorder","action=RecordButtons&verb=startRec&prm="+[this.camera.id,this.microphone],{headers:{"content-type":"application/x-www-form-urlencoded"}}).subscribe((function(e){console.log(e),t.errorMsg="Success"}),(function(e){console.log(e),t.errorMsg=e.message}))},e.prototype.onStopStream=function(){this.postAction("LIVERECORD"!==this.stream?"action=CamButtons&verb=stop":"action=RecordButtons&verb=stop"),this.stream=null},e.prototype.openDialog=function(e){this.dialog.open(Y,{width:"100%",data:e}).afterClosed().subscribe((function(e){console.log("The dialog was closed"+e)}))},e.\u0275fac=function(t){return new(t||e)(i.Rb(s.a),i.Rb(r.b),i.Rb(l.d))},e.\u0275cmp=i.Lb({type:e,selectors:[["app-mosaic"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"configuration-container"],["id","showInstrument",3,"checked","change"],["label","Cameras"],[4,"ngFor","ngForOf"],["label","Mosaic"],["class","example-selected-value",3,"dismissible",4,"ngIf"],["cols","2","rowHeight","2:1"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","heading"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","speed"],["matColumnDef","tws"],["matColumnDef","twd"],["matColumnDef","time"],["matColumnDef","blo"],["matColumnDef","bla"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""],[3,"label"],[1,"camera",3,"src"],[1,"example-selected-value",3,"dismissible"]],template:function(e,t){1&e&&(i.Lc(0,v,2,0,"div",0),i.Lc(1,T,15,9,"div",0)),2&e&&(i.uc("ngIf",t.isLoading),i.Db(1),i.uc("ngIf",!t.isLoading))},directives:[a.m,u.a,m.b,m.a,a.l,f.a,g.j,g.c,g.e,g.b,g.g,g.i,g.d,g.a,g.f,g.h,p.b,h.b,f.c],pipes:[l.c],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;overflow:hidden}img.camera-mosaic[_ngcontent-%COMP%]{width:90%}.camera[_ngcontent-%COMP%]{margin:auto;width:80%}table[_ngcontent-%COMP%]{width:100%}"]}),e}()}],q=function(){function e(){}return e.\u0275mod=i.Pb({type:e}),e.\u0275inj=i.Ob({factory:function(t){return new(t||e)},imports:[[o.g.forChild($)],o.g]}),e}(),B=n("M0ag");n("K9Ia"),n("6blF"),n("F/XL"),n("S5bw"),n("GDxn"),n("G5J1"),n("VnD/"),n("xMyE"),n("t9fZ"),n("psW0"),n("67Y/"),n("9Z1F"),n("15JJ"),n("mrSG"),n("FFOo"),n("T1DM"),n("S1nX"),n("p0Sj");var H=function(){function e(){}var t;return t=e,e.forRoot=function(e){return{ngModule:t,providers:[{provide:"options",useValue:e}]}},e.\u0275mod=i.Pb({type:e}),e.\u0275inj=i.Ob({factory:function(t){return new(t||e)}}),e}(),_=n("iYur"),E=n("BtvD"),G=n("h/AT"),Z=n("p+mS"),z=n("sNR5"),Q=n("17Os"),K=n("DjAo"),ee=n("S9aa"),te=n("MqYC"),ne=n("tNiZ"),ae=n("XIAg"),oe=n("dOeY"),re=n("GsDI"),ce=n("cSbt"),ie=n("+0bg"),se=n("OJ6B"),de=n("nbAZ"),be=n("VkwW"),ue=n("uad8"),le=n("mWkv"),me=n("agxM"),fe=n("xJ+t"),ge=n("oIZM"),pe=n("5msO"),he=n("Byqp"),ve=n("CAq0"),we=n("FfOm"),De=n("2J1J"),We=n("M/Yn"),Me=function(){function e(){}return e.\u0275mod=i.Pb({type:e}),e.\u0275inj=i.Ob({factory:function(t){return new(t||e)},imports:[[l.b,a.c,q,B.e,H,s.b,_.a,E.a,G.a,Z.b,z.c,Q.a,K.a,ee.a,ve.a,ne.a,r.f,ae.a,oe.b,f.b,re.b,ce.c,ie.a,se.b,te.l,de.b,be.b,ue.b,le.a,te.t,me.b,fe.a,ge.a,u.b,pe.a,he.c,g.k,m.d,we.a,De.b,We.a,K.a,b.d,p.j]]}),e}()}}]);