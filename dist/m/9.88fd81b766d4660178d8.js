(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"4qUK":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){return function(){}}()},lyRK:function(t,e,n){"use strict";n.r(e),n.d(e,"VideoRecordsModule",(function(){return B}));var i=n("Valr"),a=n("o8Qb"),r=n("M0ag"),c=n("DUip"),o=n("nbAZ"),s=n("Byqp"),l=n("p0ib"),u=n("F/XL"),b=n("p0Sj"),d=n("15JJ"),p=n("67Y/"),g=n("9Z1F"),f=n("4qUK"),h=n("Iab2"),m=n("TYT/"),v=n("cUzu"),w=n("ETwC"),D=n("uad8"),y=n("MnXN"),C=n("T5p2"),S=function(){function t(){this.event=new m.o}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Lb({type:t,selectors:[["app-clip"]],inputs:{img:"img",src:"src",id:"id",subtitle:"subtitle",gotoUrl:"gotoUrl"},outputs:{event:"event"},decls:14,vars:5,consts:[[1,"videogular-container"],["vgProperty","current","vgFormat","mm:ss"],[3,"vgMedia","src","id","poster"],["media",""],["kind","subtitles","label","Data","srclang","en","default","",3,"src"]],template:function(t,e){if(1&t&&(m.Xb(0,"div",0),m.Xb(1,"vg-player"),m.Sb(2,"vg-buffering"),m.Xb(3,"vg-controls"),m.Sb(4,"vg-play-pause"),m.Sb(5,"vg-playback-button"),m.Sb(6,"vg-time-display",1),m.Xb(7,"vg-scrub-bar"),m.Sb(8,"vg-scrub-bar-current-time"),m.Sb(9,"vg-scrub-bar-buffering-time"),m.Wb(),m.Sb(10,"vg-fullscreen"),m.Wb(),m.Xb(11,"video",2,3),m.Sb(13,"track",4),m.Wb(),m.Wb(),m.Wb()),2&t){var n=m.Bc(12);m.Db(11),m.uc("id",e.id),m.tc("vgMedia",n)("src",e.src,m.Fc)("poster",e.img,m.Fc),m.Db(2),m.uc("src",e.subtitle,m.Fc)}},directives:[C.n,C.d,C.e,C.g,C.h,C.l,C.i,C.k,C.j,C.f,C.m],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;overflow:hidden}vg-player.video[_ngcontent-%COMP%]{font-family:videogular;position:relative;display:flex;width:320px;height:180px;overflow:hidden;background-color:#000}.videogular-container[_ngcontent-%COMP%]{width:70%;height:auto;margin:auto;overflow:hidden}@media (min-width:1200px){.videogular-container[_ngcontent-%COMP%]{width:320px;height:180px}.videogular-container.audio[_ngcontent-%COMP%]{width:320px;height:50px}}@media (min-width:992px) and (max-width:1199px){.videogular-container[_ngcontent-%COMP%]{width:320px;height:180px}.videogular-container.audio[_ngcontent-%COMP%]{width:320px;height:50px}}@media (min-width:768px) and (max-width:991px){.videogular-container[_ngcontent-%COMP%]{width:320px;height:180px}.videogular-container.audio[_ngcontent-%COMP%]{width:320px;height:50px}}"]}),t}(),M=n("OJ6B");function P(t,e){1&t&&(m.Xb(0,"div",14),m.Sb(1,"mat-progress-spinner",15),m.Wb())}function X(t,e){if(1&t){var n=m.Yb();m.Xb(0,"ngb-alert",16),m.jc("close",(function(){return m.Ec(n),m.nc().resultMessage=null})),m.Mc(1),m.Wb()}if(2&t){var i=m.nc();m.Db(1),m.Nc(i.resultMessage)}}function x(t,e){1&t&&(m.Xb(0,"th",17),m.Mc(1),m.oc(2,"translate"),m.Wb()),2&t&&(m.Db(1),m.Nc(m.pc(2,1,"Name")))}function W(t,e){if(1&t&&(m.Xb(0,"td",18),m.Mc(1),m.Wb()),2&t){var n=e.$implicit;m.Db(1),m.Nc(n[0].GroupID)}}function O(t,e){1&t&&(m.Xb(0,"th",17),m.Mc(1),m.oc(2,"translate"),m.Wb()),2&t&&(m.Db(1),m.Nc(m.pc(2,1,"Preview")))}function R(t,e){if(1&t&&(m.Xb(0,"td",18),m.Sb(1,"app-clip",19),m.Wb()),2&t){var n=e.$implicit,i=m.nc();m.Db(1),m.tc("id",i.getID(n[0]))("img",i.getImg(n[0]))("src",i.getUrl(n[0]))("subtitle",i.getSubtitle(n[0]))}}function _(t,e){1&t&&(m.Xb(0,"th",17),m.Mc(1),m.oc(2,"translate"),m.Wb()),2&t&&(m.Db(1),m.Nc(m.pc(2,1,"Action")))}function K(t,e){if(1&t){var n=m.Yb();m.Xb(0,"td",18),m.Xb(1,"button",20),m.Mc(2,">>"),m.Wb(),m.Xb(3,"mat-menu",null,21),m.Xb(5,"button",22),m.jc("click",(function(){m.Ec(n);var t=e.$implicit,i=m.nc();return i.uploadThisFile(i.getID(t[0]),i.getID(t[0])+" will be uploaded shortly")})),m.Sb(6,"i",23),m.Xb(7,"span"),m.Mc(8),m.oc(9,"translate"),m.Wb(),m.Wb(),m.Xb(10,"button",22),m.jc("click",(function(){m.Ec(n);var t=e.$implicit,i=m.nc();return i.downloadThisFile(i.getUrl(t[0]),i.getID(t[0])+" was downloaded")})),m.Sb(11,"i",24),m.Xb(12,"span"),m.Mc(13),m.oc(14,"translate"),m.Wb(),m.Wb(),m.Wb(),m.Wb()}if(2&t){var i=m.Bc(4);m.Db(1),m.tc("matMenuTriggerFor",i),m.Db(7),m.Oc(" ",m.pc(9,3,"Upload the clip on FTP server"),""),m.Db(5),m.Oc("",m.pc(14,5,"Download the clip")," ")}}function I(t,e){1&t&&(m.Xb(0,"th",25),m.Mc(1),m.oc(2,"translate"),m.Wb()),2&t&&(m.Db(1),m.Oc(" ",m.pc(2,1,"State")," "))}function L(t,e){1&t&&(m.Xb(0,"div"),m.Sb(1,"i",28),m.Wb())}function j(t,e){1&t&&(m.Xb(0,"div"),m.Sb(1,"i",29),m.Wb())}function U(t,e){1&t&&(m.Xb(0,"div"),m.Sb(1,"i",30),m.Wb())}function k(t,e){1&t&&(m.Xb(0,"div"),m.Sb(1,"i",31),m.Wb())}function F(t,e){if(1&t&&(m.Xb(0,"td",18),m.Xb(1,"div",26),m.Kc(2,L,2,0,"div",27),m.Kc(3,j,2,0,"div",27),m.Kc(4,U,2,0,"div",27),m.Kc(5,k,2,0,"div",27),m.Wb(),m.Wb()),2&t){var n=e.$implicit,i=m.nc();m.Db(1),m.tc("ngSwitch",i.getState(n[0])),m.Db(1),m.tc("ngSwitchCase","archived"),m.Db(1),m.tc("ngSwitchCase","transfered"),m.Db(1),m.tc("ngSwitchCase","transfering"),m.Db(1),m.tc("ngSwitchCase","Declared")}}function T(t,e){1&t&&(m.Xb(0,"th",25),m.Mc(1),m.oc(2,"translate"),m.Wb()),2&t&&(m.Db(1),m.Oc(" ",m.pc(2,1,"Creation Date")," "))}function N(t,e){if(1&t&&(m.Xb(0,"td",18),m.Mc(1),m.oc(2,"date"),m.Wb()),2&t){var n=e.$implicit;m.Db(1),m.Oc(" ",m.qc(2,1,n[0].start_time,"MM/dd/yyyy hh:mm")," ")}}function V(t,e){1&t&&m.Sb(0,"tr",32)}function z(t,e){1&t&&m.Sb(0,"tr",33)}var A=function(){function t(t,e){this._httpClient=t,this.translate=e,this.displayedColumns=["created","img","title","state","action"],this.data=[],this.elementPerPage=5,this.resultsLength=0,this.isLoadingResults=!0,this.isRateLimitReached=!1,this.searchPrms=new f.a,this.translate.addLangs(["en","fr","ur","es","it","fa","de","zh-CHS"]),this.translate.setDefaultLang("en");var n=this.translate.getBrowserLang();this.translate.use(n.match(/en|fr|ur|es|it|fa|de|zh-CHS/)?n:"en")}return t.prototype.getImg=function(t){return"/media/"+t.filename_i_file},t.prototype.getUrl=function(t){return"/media/"+t.filename_p_file},t.prototype.getID=function(t){return t.GroupID},t.prototype.getState=function(t){return t.State},t.prototype.getSubtitle=function(t){return"/media/subtitles/"+t.GroupID+".vtt"},t.prototype.downloadThisFile=function(t,e){Object(h.saveAs)(t,"video.mp4"),this.resultMessage=e},t.prototype.uploadThisFile=function(t,e){var n=this;new URLSearchParams,this._httpClient.post("/recorder","action=FileSystem&verb=send&prm="+JSON.stringify({id:t,text:" empty"}),{headers:{"content-type":"application/x-www-form-urlencoded"}}).subscribe((function(t){console.log(t),n.resultMessage="Success"}),(function(t){console.log(t),n.resultMessage=t.message})),this.resultMessage=e},t.prototype.ngAfterViewInit=function(){var t=this;this.searchPrms.type="video_import",this.exampleDatabase=new H(this._httpClient,this.elementPerPage),this.sort.sortChange.subscribe((function(){return t.paginator.pageIndex=0})),Object(l.a)(this.sort.sortChange,this.paginator.page).pipe(Object(b.a)({}),Object(d.a)((function(){return t.isLoadingResults=!0,t.exampleDatabase.getClips(t.sort.active,t.sort.direction,t.paginator.pageIndex,t.searchPrms)})),Object(p.a)((function(e){return t.isLoadingResults=!1,t.isRateLimitReached=!1,t.resultsLength=e.groupCount,e.groups})),Object(g.a)((function(){return t.isLoadingResults=!1,t.isRateLimitReached=!0,Object(u.a)([])}))).subscribe((function(e){return t.data=e}))},t.\u0275fac=function(e){return new(e||t)(m.Rb(v.a),m.Rb(a.d))},t.\u0275cmp=m.Lb({type:t,selectors:[["app-map"]],viewQuery:function(t,e){var n;1&t&&(m.Rc(o.a,!0),m.Rc(s.a,!0)),2&t&&(m.Ac(n=m.kc())&&(e.paginator=n.first),m.Ac(n=m.kc())&&(e.sort=n.first))},decls:23,vars:7,consts:[["style","display: flex; justify-content: center; align-items: center",4,"ngIf"],["type","success",3,"close",4,"ngIf"],["mat-table","","matSort","","matSortActive","created","matSortDisableClear","","matSortDirection","desc",3,"dataSource"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","img"],["matColumnDef","action"],["matColumnDef","state"],["mat-header-cell","","mat-sort-header","","disableClear","",4,"matHeaderCellDef"],["matColumnDef","created"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"length","pageSize"],[2,"display","flex","justify-content","center","align-items","center"],["color","primary","mode","indeterminate"],["type","success",3,"close"],["mat-header-cell",""],["mat-cell",""],[3,"id","img","src","subtitle"],["mat-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"fa","fa-upload"],[1,"fa","fa-download"],["mat-header-cell","","mat-sort-header","","disableClear",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"fa","fa-save"],[1,"fa","fa-cloud"],[1,"fa","fa-spinner"],[1,"fa","fa-check"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.Xb(0,"div"),m.Kc(1,P,2,0,"div",0),m.Kc(2,X,2,1,"ngb-alert",1),m.Xb(3,"div"),m.Xb(4,"table",2),m.Vb(5,3),m.Kc(6,x,3,3,"th",4),m.Kc(7,W,2,1,"td",5),m.Ub(),m.Vb(8,6),m.Kc(9,O,3,3,"th",4),m.Kc(10,R,2,4,"td",5),m.Ub(),m.Vb(11,7),m.Kc(12,_,3,3,"th",4),m.Kc(13,K,15,7,"td",5),m.Ub(),m.Vb(14,8),m.Kc(15,I,3,3,"th",9),m.Kc(16,F,6,5,"td",5),m.Ub(),m.Vb(17,10),m.Kc(18,T,3,3,"th",9),m.Kc(19,N,3,4,"td",5),m.Ub(),m.Kc(20,V,1,0,"tr",11),m.Kc(21,z,1,0,"tr",12),m.Wb(),m.Wb(),m.Sb(22,"mat-paginator",13),m.Wb()),2&t&&(m.Db(1),m.tc("ngIf",e.isLoadingResults),m.Db(1),m.tc("ngIf",e.resultMessage),m.Db(2),m.tc("dataSource",e.data),m.Db(16),m.tc("matHeaderRowDef",e.displayedColumns),m.Db(1),m.tc("matRowDefColumns",e.displayedColumns),m.Db(1),m.tc("length",e.resultsLength)("pageSize",5))},directives:[i.m,w.j,s.a,w.c,w.e,w.b,w.g,w.i,o.a,D.a,y.b,w.d,w.a,S,M.c,M.d,M.a,s.b,i.o,i.p,w.f,w.h],pipes:[a.c,i.e],styles:["table[_ngcontent-%COMP%]{width:100%}img[_ngcontent-%COMP%]{width:320px;height:180px}"]}),t}(),H=function(){function t(t,e){this._httpClient=t,this.elementPerPage=e}return t.prototype.serialize=function(t){var e=new URLSearchParams;for(var n in t)t.hasOwnProperty(n)&&e.set(n,t[n]);return e},t.prototype.getClips=function(t,e,n,i){i.start=n*this.elementPerPage,i.count=(n+1)*this.elementPerPage;var a=this.serialize(i);return this._httpClient.get("/recorder/search?"+a)},t}(),J=[{path:"",component:A}],$=function(){function t(){}return t.\u0275mod=m.Pb({type:t}),t.\u0275inj=m.Ob({factory:function(e){return new(e||t)},imports:[[c.g.forChild(J)],c.g]}),t}(),B=function(){function t(){}return t.\u0275mod=m.Pb({type:t}),t.\u0275inj=m.Ob({factory:function(e){return new(e||t)},imports:[[a.b,i.c,$,r.e,v.b,M.b,o.b,D.b,s.c,w.k,r.c,y.c]]}),t}()}}]);