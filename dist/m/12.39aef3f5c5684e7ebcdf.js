(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{GZeB:function(t,e,o){"use strict";o.r(e),o.d(e,"DashboardModule",(function(){return v}));var n=o("Valr"),a=o("MnXN"),r=o("o8Qb"),s=o("DUip"),i=o("ZZ88"),c=o("TYT/"),b=o("cUzu"),u=function(){function t(t){this.router=t,this.event=new c.o}return t.prototype.ngOnInit=function(){},t.prototype.gotoPage=function(){this.router.navigateByUrl(this.gotoUrl)},t.\u0275fac=function(e){return new(e||t)(c.Rb(s.c))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-stat"]],inputs:{bgClass:"bgClass",icon:"icon",count:"count",label:"label",data:"data",gotoUrl:"gotoUrl",viewName:"viewName"},outputs:{event:"event"},decls:18,vars:10,consts:[["mat-elevation-z8","",3,"click"],[1,"card-header"],[1,"row"],[1,"col","col-xs-3"],[1,"col","col-xs-9","text-right"],[1,"d-block","huge"],[1,"d-block"],[1,"card-footer"],[1,"float-left"],[1,"fa","fa-arrow-circle-right","fa-5x"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.jc("click",(function(){return e.gotoPage()})),c.Xb(1,"div",1),c.Xb(2,"div",2),c.Xb(3,"div",3),c.Sb(4,"i"),c.Wb(),c.Xb(5,"div",4),c.Xb(6,"h1"),c.Xb(7,"div",5),c.Nc(8),c.Wb(),c.Wb(),c.Xb(9,"h4"),c.Xb(10,"div",6),c.Nc(11),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(12,"div",7),c.Xb(13,"h5"),c.Xb(14,"span",8),c.Nc(15),c.Wb(),c.Wb(),c.Xb(16,"span"),c.Sb(17,"i",9),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Gb("card text-white bg-",e.bgClass,""),c.Db(4),c.Gb("fa ",e.icon," fa-5x"),c.Db(4),c.Oc(e.count),c.Db(3),c.Oc(e.label),c.Db(4),c.Qc("",e.viewName," ",e.data,""))},styles:[""]}),t}();function l(t,e){1&t&&(c.Xb(0,"div"),c.Nc(1," loading .... "),c.Wb())}function d(t,e){1&t&&(c.Xb(0,"div"),c.Nc(1," Error while connecting to server "),c.Wb())}function g(t,e){if(1&t&&(c.Xb(0,"div"),c.Xb(1,"div"),c.Xb(2,"div",1),c.Xb(3,"div",2),c.Sb(4,"app-stat",3),c.oc(5,"translate"),c.oc(6,"translate"),c.Wb(),c.Xb(7,"div",2),c.Sb(8,"app-stat",3),c.oc(9,"translate"),c.oc(10,"translate"),c.Wb(),c.Xb(11,"div",2),c.Sb(12,"app-stat",3),c.oc(13,"translate"),c.oc(14,"translate"),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t){var o=c.nc();c.Db(1),c.uc("@routerTransition",void 0),c.Db(3),c.uc("bgClass","warning")("icon","fa-bolt")("count",o.stats.eventCount)("label",c.pc(5,19,"Detected events"))("gotoUrl","search/map")("viewName",c.pc(6,21,"View on the map")),c.Db(4),c.uc("bgClass","success")("icon","fa-film")("count",o.stats.clipCount)("label",c.pc(9,23,"Clips ready to share"))("gotoUrl","video-records")("viewName",c.pc(10,25,"Share these videos")),c.Db(4),c.uc("bgClass","success")("icon","fa-cog")("count",o.stats.workerCount)("label",c.pc(13,27,"Background tasks"))("gotoUrl","worker")("viewName",c.pc(14,29,"Look out"))}}var p=[{path:"",component:function(){function t(t,e){this.translate=t,this.http=e,this.error=null,this.doughnutChartLabels=["Used","Left","Reserved"],this.doughnutChartData=[350,450,100],this.url="/recorder/stats",this.isLoading=!0,this.translate.addLangs(["en","fr","ur","es","it","fa","de","zh-CHS"]),this.translate.setDefaultLang("en");var o=this.translate.getBrowserLang();this.translate.use(o.match(/en|fr|ur|es|it|fa|de|zh-CHS/)?o:"en"),this.doughnutChartType="doughnut"}return t.prototype.chartClicked=function(t){},t.prototype.chartHovered=function(t){},t.prototype.getStats=function(t){var e=this;t.http.get(t.url).subscribe((function(e){t.stats=e,t.doughnutChartData[0]=t.stats.storageUsage,t.doughnutChartData[1]=t.stats.storageLimit-t.stats.storageUsage,t.doughnutChartData[2]=100-t.stats.storageLimit,t.getWorkers(t)}),(function(t){return e.logError(t)}))},t.prototype.getWorkers=function(t){t.http.get("/recorder/tasksTag").subscribe((function(e){t.stats.workerCount=e.tasks.length,t.isLoading=!1}))},t.prototype.ngOnInit=function(){this.getStats(this)},t.prototype.logError=function(t){this.error="error"},t.\u0275fac=function(e){return new(e||t)(c.Rb(r.d),c.Rb(b.a))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-dashboard"]],decls:3,vars:3,consts:[[4,"ngIf"],[1,"row"],[1,"col-xl-3","col-lg-6","stat"],[3,"bgClass","icon","count","label","gotoUrl","viewName"]],template:function(t,e){1&t&&(c.Lc(0,l,2,0,"div",0),c.Lc(1,d,2,0,"div",0),c.Lc(2,g,15,31,"div",0)),2&t&&(c.uc("ngIf",e.isLoading),c.Db(1),c.uc("ngIf",e.error),c.Db(1),c.uc("ngIf",!e.isLoading&&!e.error))},directives:[n.m,u],pipes:[r.c],styles:["@media (min-width:992px){.app-stat[_ngcontent-%COMP%]{height:50%}}"],data:{animation:[Object(i.a)()]}}),t}()}],h=function(){function t(){}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[s.g.forChild(p)],s.g]}),t}(),f=o("M0ag"),v=function(){function t(){}return t.\u0275mod=c.Pb({type:t}),t.\u0275inj=c.Ob({factory:function(e){return new(e||t)},imports:[[n.c,a.d,a.c,h,f.h,r.b]]}),t}()}}]);